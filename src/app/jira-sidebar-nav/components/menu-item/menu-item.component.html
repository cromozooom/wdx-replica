<!-- Menu Item Template (T029, T082) -->
<div
  class="menu-item"
  [class.active]="isActive"
  [class.has-children]="hasChildren"
  [style.padding-left]="getIndentPadding()"
  (click)="onClick($event)"
  [attr.title]="item.label"
>
  <!-- Expansion Icon (if has children) -->
  @if (hasChildren) {
    <span
      class="expansion-icon"
      [class.expanded]="isExpanded"
      (click)="onToggleExpansion($event)"
      role="button"
      [attr.aria-expanded]="isExpanded"
      [attr.aria-label]="isExpanded ? 'Collapse' : 'Expand'"
    >
      <i
        [class]="isExpanded ? 'fas fa-chevron-down' : 'fas fa-chevron-right'"
      ></i>
    </span>
  }

  <!-- Icon -->
  @if (item.icon) {
    <span class="item-icon" [attr.aria-hidden]="true">
      <i [class]="item.icon"></i>
    </span>
  }

  <!-- Label with truncation (T082, FR-031) -->
  <span class="item-label" [attr.title]="item.label">
    @if (item.routerLink) {
      <a
        [routerLink]="item.routerLink"
        class="item-link"
        [class.active]="isActive"
      >
        {{ item.label }}
      </a>
    } @else {
      <span class="item-text">{{ item.label }}</span>
    }
  </span>

  <!-- Badge (if metadata.badgeCount exists) -->
  @if (
    item.metadata && item.metadata.badgeCount && item.metadata.badgeCount > 0
  ) {
    <span class="item-badge">
      {{ item.metadata.badgeCount }}
    </span>
  }
</div>
