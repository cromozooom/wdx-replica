<div class="flex-grow-1 d-flex flex-column">
  <header class="d-flex justify-content-between p-2 border-bottom">
    <div class="h5 mb-0">SPX Magic selector</div>
    <div class="d-flex align-items-center gap-2">
      <label for="themeSelector" class="mb-0">Theme:</label>
      <select
        id="themeSelector"
        class="form-select form-select-sm"
        [(ngModel)]="currentTheme"
        (change)="onThemeChange($event)"
      >
        <option value="light">Light</option>
        <option value="dark">Dark</option>
        <option value="system">System</option>
      </select>
    </div>
  </header>
  <div class="d-flex flex-column overflow-hidden flex-grow-1">
    <!-- <div class="container">
      <div class="row mb-4">
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <h6 class="text-muted mb-1">Total Selections</h6>
              <h3 class="mb-0">{{ rowData.length }}</h3>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <h6 class="text-muted mb-1">CRM & Scheduling</h6>
              <h3 class="mb-0">{{ crmCount }}</h3>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <h6 class="text-muted mb-1">Document Management</h6>
              <h3 class="mb-0">{{ documentCount }}</h3>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <h6 class="text-muted mb-1">Latest Selection</h6>
              <h3 class="mb-0 text-truncate" style="font-size: 1rem">
                {{ rowData[0]?.name || "None" }}
              </h3>
            </div>
          </div>
        </div>
      </div>
    </div> -->
    <div class="flex-grow-1 d-flex flex-column overflow-hidden p-2">
      <div *ngIf="rowData.length === 0" class="text-center py-5">
        <i class="fa fa-inbox fa-3x text-muted mb-3"></i>
        <h5 class="text-muted">No selections yet</h5>
        <p class="text-muted mb-3">
          Click "Add New Selection" to create your first selection
        </p>
        <button
          type="button"
          class="btn btn-primary"
          (click)="openAddSelectionModal()"
        >
          <i class="fa fa-plus-circle me-2"></i>
          New Bulk Edit
        </button>
      </div>
      <div
        class="d-flex align-items-center justify-content-between mb-2"
        *ngIf="rowData.length > 0"
      >
        <div>
          <h6 class="mb-0">Bulk list</h6>
        </div>
        <div class="d-flex align-items-center gap-2">
          <app-spx-tools></app-spx-tools>
          <button
            type="button"
            class="btn btn-link text-decoration-none"
            (click)="clearAllSelections()"
            [disabled]="rowData.length === 0"
          >
            <i class="fa fa-trash me-1"></i>
            Clear All
          </button>
          <button
            type="button"
            class="btn btn-link text-decoration-none"
            (click)="openAddSelectionModal()"
          >
            <i class="fa fa-plus-circle me-2"></i>
            New
          </button>
        </div>
      </div>
      <ag-grid-angular
        *ngIf="rowData.length > 0"
        class="w-100 h-100"
        [ngClass]="agGridThemeClass"
        [rowData]="rowData"
        [columnDefs]="columnDefs"
        [defaultColDef]="defaultColDef"
        [gridOptions]="gridOptions"
        [getRowId]="getRowId"
        (gridReady)="onGridReady($event)"
      >
      </ag-grid-angular>
    </div>
  </div>
</div>
