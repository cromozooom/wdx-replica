<div class="w-100 flex-grow-1 d-flex flex-column">
  <div
    class="w-100 pt-2 px-2 d-flex align-items-center justify-content-between"
  >
    <div class="d-flex align-items-center gap-2">
      <select
        class="form-select w-auto d-inline-block"
        (change)="onDatasetChange($event)"
      >
        <option *ngFor="let ds of datasets" [selected]="ds === selectedDataset">
          {{ ds.label }}
        </option>
      </select>
      <span class="ms-2">{{ fakeData.length }} changes</span>
    </div>
    <div class="d-flex gap-2 align-items-center">
      <ng-select
        class="w-auto"
        [items]="fieldNames"
        bindLabel="field"
        placeholder="Filter by field"
        [(ngModel)]="d3SelectedFields"
        [multiple]="true"
        [clearable]="true"
        (change)="
          onD3FilterChanged({
            fields: d3SelectedFields,
            authors: d3SelectedAuthors,
          })
        "
      ></ng-select>
      <ng-select
        class="w-auto"
        [items]="authorNames"
        bindLabel="author"
        [multiple]="true"
        placeholder="Filter by author"
        [(ngModel)]="d3SelectedAuthors"
        [clearable]="true"
        (change)="
          onD3FilterChanged({
            fields: d3SelectedFields,
            authors: d3SelectedAuthors,
          })
        "
      ></ng-select>
    </div>
  </div>
  <div class="flex-grow-1 w-100 d-flex flex-column">
    <div class="w-100 flex-grow-0 d-flex p-2">
      <app-d3-data-history [data]="filteredData"></app-d3-data-history>
    </div>
    <div class="w-100 flex-grow-1 d-flex p-2">
      <app-grid-history-data
        class="w-100 flex-grow-1"
        [rowData]="filteredData"
        [columnDefs]="columnDefs"
        [defaultColDef]="{
          resizable: true,
          sortable: true,
          filter: true,
          autoHeight: true,
        }"
      ></app-grid-history-data>
    </div>
  </div>
</div>
